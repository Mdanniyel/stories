---
// src/pages/stories/[...slug].astro
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const stories = await getCollection('stories');
  return stories.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={entry.data.title}>
    <article class="bg-white p-8 rounded-lg shadow-sm border border-gray-100">
        <header class="mb-6 border-b pb-4">
            <h1 class="text-3xl font-bold mb-2 text-indigo-900">{entry.data.title}</h1>
            <div class="flex flex-wrap gap-4 text-sm text-gray-500">
                <a 
                  href=`/?author=${entry.data.author}`
                  on:click|stopPropagation 
                  class="hover:text-indigo-600 hover:underline z-10"
                >
                  âœï¸ {entry.data.author}
                </a>
                <span>ğŸ“… {entry.data.date.toLocaleDateString('he-IL')}</span>
            </div>
        </header>

        <div class="prose prose-lg max-w-none prose-headings:text-indigo-800">
            <Content />
        </div>
    </article>
</Layout>